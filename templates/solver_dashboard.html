{% extends "layout.html" %}
{% block title %}Solver Dashboard{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto mt-8">
    <h2 class="text-2xl font-semibold mb-4">Assignments Available to Solve</h2>

    {% if tasks %}
        <div class="grid gap-4">
            {% for task in tasks %}
                <div class="bg-white p-4 rounded shadow border">
                    <h3 class="text-lg font-bold text-gray-800">{{ task.title }}</h3>
                    <p class="text-sm text-gray-600">{{ task.subject }} · {{ task.pages }} pages · ₹{{ task.price }}</p>
                    <p class="text-sm text-gray-700 mt-2">{{ task.description }}</p>
                    <div class="mt-3 flex gap-3">
                        <a href="/assignment/{{ task.id }}" class="text-blue-600 hover:underline text-sm">View & Apply</a>
                        {% if task.poster_id %}
                            <a href="/profile/{{ task.poster_id }}" class="text-gray-600 hover:underline text-sm">View Poster</a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-gray-500">No open assignments right now. Check back later.</p>
    {% endif %}

    <hr class="my-6">

    <h2 class="text-2xl font-semibold mb-4">Your Assigned Tasks</h2>

    {% if assigned %}
        <div class="grid gap-4">
            {% for task in assigned %}
                <div class="bg-green-50 p-4 rounded shadow border border-green-200">
                    <h3 class="text-lg font-bold text-gray-800">{{ task.title }}</h3>
                    <p class="text-sm text-gray-600">Deadline: {{ task.deadline }}</p>
                    <p class="text-sm text-gray-700 mt-1">{{ task.description }}</p>
                    <div class="mt-3 flex gap-4">
                        <a href="/assignment/{{ task.id }}" class="text-green-700 hover:underline text-sm">View</a>
                        <a href="/chat/{{ task.id }}" class="text-green-700 hover:underline text-sm">Go to Chat</a>
                        <a href="/profile/{{ task.poster_id }}" class="text-gray-600 hover:underline text-sm">View Poster</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-gray-500">You haven’t been selected for any tasks yet.</p>
    {% endif %}
</div>
{% endblock %}
